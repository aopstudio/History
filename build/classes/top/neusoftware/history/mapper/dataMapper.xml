<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd"> 
<mapper namespace="top.neusoftware.history.mapper.DataMapper">
    <select id="getDatas" resultType="top.neusoftware.history.model.Data" > 
      	select id,date,heading,body from windows order by date
    </select>
    <select id="getData" parameterType="java.lang.Integer" resultType="top.neusoftware.history.model.Data">
    	select id,date,heading,body from windows where id = #{data_id}
    </select>
    <select id="getLastId" resultType="java.lang.Integer">
    	select LAST_INSERT_ID()
    </select>
    <insert id="addData" parameterType="top.neusoftware.history.model.Data">
    	insert into windows (date,heading,body) values(#{date},#{heading},#{body})
    </insert>
    <delete id="deleteData" parameterType="java.lang.Integer">
    	delete from windows where id = #{id}
    </delete>
    <insert id="deleteRecord" parameterType="top.neusoftware.history.model.DeleteRecord">
    	insert into delete_record (id,date,heading,body,ip_address,time) values(#{id},#{date},#{heading},#{body},#{ip_address},#{time})
    </insert>
    <insert id="addRecord" parameterType="top.neusoftware.history.model.AddRecord">
    	insert into insert_record (id,ip_address,time) values(#{id},#{ip_address},#{time})
    </insert>
</mapper>